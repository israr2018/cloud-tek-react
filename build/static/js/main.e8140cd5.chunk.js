(window["webpackJsonpcloud-tek-react"]=window["webpackJsonpcloud-tek-react"]||[]).push([[0],{16:function(e,t,n){e.exports=n(39)},21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),c=n(15),o=n.n(c),u=(n(21),n(2)),r=n(5),i=n.n(r),m=function(e){var t=e.setEditMode,n=e.deleteCoupon,a=(e.edit,e.coupons),c=function(e,a){switch(e.preventDefault(),e.target.name){case"edit":t(a);break;case"delete":n(a.id)}};return l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Percent_Off"),l.a.createElement("th",null,"Edit"),l.a.createElement("th",null,"Delete"))),l.a.createElement("tbody",null,a.map((function(e){return l.a.createElement("tr",{key:e.id},l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.percent_off),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(t){c(t,e)},className:"button muted-button",name:"edit"},"Edit")),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(t){c(t,e)},className:"button muted-button",name:"delete"},"Delete")))}))))},f=n(4),d=n(3),p=function(e){var t=e.addCoupon,n={name:"",percent_off:null},a=l.a.useState(n),c=Object(u.a)(a,2),o=c[0],r=c[1],i=function(e){console.log("e.target:"+e.target.name);var t=e.target,n=t.name,a=t.value,l=Object(d.a)(Object(d.a)({},o),{},Object(f.a)({},n,a));console.log("new_coupon:"+JSON.stringify(l)),r(l)};return l.a.createElement("form",null,l.a.createElement("h2",null,"Add New Coupon"),l.a.createElement("p",null,l.a.createElement("label",null,"Name:"),l.a.createElement("input",{type:"text",name:"name",value:o.name,onChange:i})),l.a.createElement("p",null,l.a.createElement("label",null,"Percent Off:"),l.a.createElement("input",{type:"text",name:"percent_off",value:o.percent_off,onChange:i})),l.a.createElement("label",null,"Duration:"),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"duration",value:"once",onChange:i}),"Once"),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"duration",value:"repeating",onChange:i}),"repeating"),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"duration",value:"forever",onChange:i}),"forever"),l.a.createElement("input",{type:"submit",onClick:function(e){e.preventDefault(),!o.name&!o.percent_off||(t(o),console.log("initial_values:"+JSON.stringify(n)),r(n))},value:"Submit"}))},s=function(e){var t=e.cancelEditMode,n=e.updateCoupon,c=e.currentCoupon,o=l.a.useState(c),r=Object(u.a)(o,2),i=r[0],m=r[1];Object(a.useEffect)((function(){m(c)}),[e]);var p=function(e){switch(console.log("handleButtonClick"),e.preventDefault(),e.target.name){case"submit":n(i);break;case"cancel":console.log("cancel"),t();break;case"name":case"percent_off":m(Object(d.a)(Object(d.a)({},i),{},Object(f.a)({},e.target.name,e.target.value)))}};return l.a.createElement("form",null,l.a.createElement("h2",null,"Edit Coupon"),l.a.createElement("label",null,"Name:"),l.a.createElement("input",{type:"text",name:"name",value:i.name,onChange:function(e){p(e)}}),l.a.createElement("label",null,"Percent_Off:"),l.a.createElement("input",{type:"text",name:"percent_off",value:i.percent_off,onChange:function(e){p(e)}}),l.a.createElement("button",{onClick:function(e){p(e)},name:"submit"},"Submit"),l.a.createElement("button",{onClick:function(e){p(e)},name:"cancel"},"Cancel"))};var E=function(){var e="https://cloud-tek-api.herokuapp.com/api/stripe/coupons",t=l.a.useState(!0),n=Object(u.a)(t,2),a=n[0],c=n[1],o=l.a.useState(!1),r=Object(u.a)(o,2),f=r[0],d=r[1],E=l.a.useState([]),b=Object(u.a)(E,2),g=b[0],h=b[1],v=l.a.useState({id:null,name:""}),C=Object(u.a)(v,2),w=C[0],O=C[1];l.a.useEffect((function(){k()}),[]);var k=function(){c(!0),i.a.get(e).then((function(e){var t=e.data.data.data;h(t),c(!1)}))},y=function(){d(!1)};return l.a.createElement("div",{className:"container"},l.a.createElement("h1",null," Strip Coupons with React"),l.a.createElement("div",{className:"flex-row"},l.a.createElement("div",{className:"flex-large"},f?l.a.createElement(s,{cancelEditMode:y,updateCoupon:function(t){i.a.put(e,t).then((function(e){k(),y()})).catch((function(e){console.log("error in updating coupon"+e)}))},currentCoupon:w}):l.a.createElement(p,{addCoupon:function(t){console.log("new_coupon:"+JSON.stringify(t)),i.a.post(e,t).then((function(e){k()})).catch((function(e){console.log("err"+e)}))}})),l.a.createElement("div",{className:"flex-large"},l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"View users"),a?l.a.createElement("div",null,"Loading data"):l.a.createElement(m,{coupons:g,setEditMode:function(e){d(!0),console.log("currentCoupon",e),O(e)},deleteCoupon:function(t){i.a.delete(e+t).then((function(e){k()})).catch((function(e){k()}))},edit:f,cancelEditMode:y})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.e8140cd5.chunk.js.map